# Web of Science 自动下载插件

这是一个 Chrome 浏览器扩展，用于自动化下载 Web of Science 上的学术论文。该插件通过 Sci-Hub 提供的服务实现论文的自动下载功能。

## 主要功能

### 1. DOI 检索功能
- 支持多种方式获取论文 DOI：
  - 通过 `#FullRTa-DOI` 元素
  - 通过 `[data-doi]` 属性
  - 通过 `[data-ta="record-DOI"]` 属性
  - 通过页面内容正则匹配 DOI 格式
- 实现了自动重试机制，确保在页面完全加载后获取 DOI

### 2. 自动下载功能
- 支持单篇论文下载
- 通过复选框选择要下载的论文
- 自动处理下载按钮点击事件
- 支持多种下载方式：
  - 通过 buttons 容器中的下载按钮
  - 通过嵌入的 PDF 查看器
  - 通过页面中的 PDF 链接

### 3. 智能页面处理
- 自动打开新标签页处理文章详情
- 后台静默处理，不影响用户操作
- 自动关闭处理完成的标签页

### 4. 错误处理
- 完整的错误处理机制
- 详细的日志记录
- 清晰的错误提示信息

### 5. 自动更新支持
- 检测插件更新
- 自动重新加载相关页面
- 保持功能的最新状态

## 使用方法

1. 在 Web of Science 搜索结果页面：
   - 单篇下载：点击文章对应的下载按钮
   - 批量下载：选择多篇文章的复选框，然后点击下载按钮

2. 插件会自动：
   - 获取文章的 DOI
   - 打开 Sci-Hub 页面
   - 触发下载操作
   - 关闭临时打开的标签页

## 注意事项

1. 确保网络连接稳定
2. 部分论文可能需要较长时间加载
3. 如遇到下载失败，可以尝试重新点击下载按钮

## 错误处理

常见错误信息及解决方案：
- "DOI not found": 等待页面完全加载后重试
- "下载按钮未找到": 检查网络连接，刷新页面后重试
- "处理超时": 网络较慢时可能发生，请重试

## 技术实现

插件使用以下技术：
- Chrome Extension API
- JavaScript
- Promise 异步处理
- DOM 操作
- 正则表达式

## 更新日志

### 最新版本
- 优化 DOI 获取逻辑
- 增加多种下载按钮识别方式
- 改进错误处理机制
- 优化用户体验 